# ===================================================================
# PR Guardian AI - Environment Configuration Example
# ===================================================================
# Copy this file to `.env` and fill in the values before deploying.
#
# DEPLOYMENT TUTORIAL: Railway.com
# ===================================================================
#
# Quick Start Guide to Deploy PR Guardian AI on Railway:
#
# 1. Create GitHub Personal Access Token (PAT)
#    ------------------------------------------
#    - Go to: https://github.com/settings/tokens
#    - Click "Generate new token" -> "Generate new token (classic)"
#    - Name it: "PR Guardian AI"
#    - Select scopes:
#      âœ“ repo (Full control of private repositories)
#      âœ“ public_repo (Access to public repositories)
#    - Click "Generate token"
#    - COPY THE TOKEN NOW (you won't see it again!)
#
# 2. Get OpenAI API Key
#    -------------------
#    - Go to: https://platform.openai.com/api-keys
#    - Click "Create new secret key"
#    - Name it: "PR Guardian AI"
#    - Copy the key
#
# 3. (Optional) Configure OpenAI Base URL
#    ------------------------------------
#    - Default: https://api.openai.com/v1 (Official OpenAI API)
#    - Alternative: https://api.z.ai/api/coding/paas/v4 (Z.AI GLM Coding)
#    - Or any OpenAI-compatible API endpoint
#
# 4. Deploy on Railway
#    ------------------
#    a) Go to: https://railway.app/
#    b) Sign up/login (GitHub login recommended)
#    c) Click "New Project" -> "Deploy from GitHub repo"
#    d) Select this repository
#    e) Railway will detect it's a Python project automatically
#    f) Click "Deploy"
#
# 5. Add Environment Variables in Railway
#    ------------------------------------
#    a) In your Railway project, go to the "Variables" tab
#    b) Add the following variables:
#
#       GITHUB_TOKEN=ghp_your_github_pat_here
#       OPENAI_API_KEY=sk-your-openai-key-here
#       OPENAI_BASE_URL=https://api.openai.com/v1
#       BOT_NAME=PR Guardian AI
#       LOG_LEVEL=info
#
#    c) Click "Add Variable" after each one
#    d) Click "Save Changes" and Railway will restart your app
#
# 6. Configure GitHub Webhook
#    ------------------------
#    a) Get your Railway app URL:
#       - In Railway dashboard, click on your app
#       - Click the "Generate Domain" button if needed
#       - Copy the URL (e.g., https://your-app.railway.app)
#
#    b) For EACH repository you want to monitor:
#       - Go to: https://github.com/OWNER/REPO/settings/hooks
#       - Click "Add webhook"
#       - Payload URL: https://your-app.railway.app/webhook
#       - Content type: application/json
#       - Secret: (leave empty or set your own)
#       - Events: Select "Let me select individual events"
#         âœ“ Pull requests
#       - Click "Add webhook"
#
# 7. Test the Setup
#    --------------
#    - Create a test pull request in the configured repository
#    - Within a few seconds, you should see a bot comment starting with:
#      "ðŸ¤– PR Guardian AI - Automated Code Review"
#    - Check Railway logs for any errors
#
# ===================================================================
# Troubleshooting
# ===================================================================
#
# Problem: "Failed to fetch PR diff"
# Solution: Check GITHUB_TOKEN has 'repo' scope
#
# Problem: "Failed to generate AI review"
# Solution: Check OPENAI_API_KEY is valid and has credits
#
# Problem: Webhook not triggering
# Solution: Check webhook URL is correct and test webhook delivery
#
# Problem: Bot doesn't comment
# Solution: Check GITHUB_TOKEN has write access to the repo
#
# ===================================================================

# ================== REQUIRED SETTINGS ==================

# GitHub Personal Access Token (classic)
# Create at: https://github.com/settings/tokens
# Required scopes: repo, public_repo
GITHUB_TOKEN=ghp_your_github_pat_here

# OpenAI API Key
# Create at: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here

# ================== OPTIONAL SETTINGS ==================

# OpenAI Base URL (default: official OpenAI API)
# Alternatives: https://api.z.ai/api/coding/paas/v4
#              or any OpenAI-compatible endpoint
OPENAI_BASE_URL=https://api.openai.com/v1

# OpenAI Model ID (default: gpt-4o-mini)
# For official OpenAI: gpt-4o-mini, gpt-4o, gpt-4-turbo, etc.
# For Z.AI: Check their documentation for available models
OPENAI_MODEL_ID=gpt-4o-mini

# Webhook Secret (optional, for signature verification)
# Leave empty if not using webhooks with secret
GITHUB_WEBHOOK_SECRET=

# Bot Display Name (used in comments)
BOT_NAME=PR Guardian AI

# Logging Level: debug, info, warning, error
LOG_LEVEL=info

# ================== DEPRECATED SETTINGS ==================
# These are no longer needed (using PAT instead)
# GITHUB_APP_ID=...
# GITHUB_PRIVATE_KEY_PATH=...
# GITHUB_WEBHOOK_SECRET=... (optional now)
